# Нагрузочное тестирование
Команда для запусков тестов
```
make gen-wrk-report 
```
# Тест на создание вакансии
```
wrk -t5 -c10 -d60m -s db/perf_test/post_vacancy.lua http://127.0.0.1:8000 > db/perf_test/outpost.txt  
```
```
Running 60m test @ http://localhost:8000
  5 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     312.45ms  75.23ms  950.34ms   70.12%
    Req/Sec       7.21     2.67     18.00     63.50%
  123480 requests in 60.00m, 115.24MB read
Requests/sec:     34.30
Transfer/sec:     32.83KB
```

# Тест на получение вакансии
#
```
wrk -t5 -c10 -d60m -s db/perf_test/get_vacancy.lua http://localhost:8000 > db/perf_test/outget.txt
```
```
Running 60m test @ http://localhost:8000
  5 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     258.14ms  61.07ms  812.12ms   67.34%
    Req/Sec       8.74     3.10     21.00     68.11%
  140110 requests in 60.00m, 124.76MB read
Requests/sec:     38.91
Transfer/sec:     35.52KB
```
Команда выполняет нагрузочные тесты из файлов post_vacancy.lua и get_vacancy.lua, сохраняет результаты в perf_test/outpost.txt и perf_test/outget.txt, затем выводит их содержимое в консоль. При повторном запуске файлы перезапишутся.

## Анализ
### Система обрабатывает в среднем 34.30 запроса в секунду при создании вакансий.
Средняя задержка составляет 312.45 ms, что укладывается в допустимые пределы для создания сложных объектов с валидацией.

Вывод: текущая реализация создания вакансий работает стабильно и не требует оптимизации.

### Получение вакансии
Средняя задержка при получении одной вакансии составляет 258.14 ms, а количество запросов в секунду — 38.91, что выше, чем при создании.

Это ожидаемо, так как чтение данных из БД обычно требует меньше ресурсов, чем их создание и валидация.

Возможные улучшения:

Кэширование часто запрашиваемых вакансий;

Проверка индексов в БД по полю ID;

Убедиться, что не загружаются избыточные связанные данные.

### Вывод
Нагрузка показывает, что и POST, и GET запросы к вакансиям выдерживают стабильную нагрузку на протяжении часа. Производительность находится на приемлемом уровне.
Можно рекомендовать систему к дальнейшему этапу тестирования или выкладке в production при текущих нагрузках.